# on:
#   pull_request:
#     types: [opened, reopened, synchronize, edited, labeled]

# jobs:
#   doc-build:
#     name: "Doc build"
#     runs-on: ubuntu-latest
#     steps:
#       - uses: ansys/actions/doc-build@{{ version }}
#         with:
#           python-version: ${{ '{{env.MAIN_PYTHON_VERSION}}' }}

# It is recommended to use this action with a labeling strategy
# that allows documentation deployment to be requested on a per-PR basis.
# The following example assumes a repository has set up a 'deploy-pr-doc'
# label, and PR documentation will only be deployed when that label is added to a PR.

doc-deploy-pr:
  name: "Deploy PR documentation"
  runs-on: ubuntu-latest
  needs: doc-build
  if: contains(github.event.pull_request.labels.*.name, 'deploy-pr-doc')
  steps:
    - uses: ansys/actions/doc-deploy-pr@{{ version }}
      with:
        cname: ${{ '{{ env.DOCUMENTATION_CNAME }}' }}
        token: ${{ '{{ secrets.GITHUB_TOKEN }}' }}
        bot-user: ${{ '{{ secrets.PYANSYS_CI_BOT_USERNAME }}' }}
        bot-email: ${{ '{{ secrets.PYANSYS_CI_BOT_EMAIL }}' }}
        maximum-pr-doc-deployments: 3