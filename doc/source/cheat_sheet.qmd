---
title: Ansys Actions
format: cheat_sheet-pdf
version: main
footer: Getting started with Ansys action
footerlinks:
  - urls: 'https://actions.docs.ansys.com/version/stable/'
    text: Ansys action documentation
  - urls: 'https://github.com/ansys/actions/'
    text: Ansys action gitHub
execute:
    # output: false
    eval: false

latex-clean: true
jupyter:
  jupytext:
    text_representation:
      extension: .qmd
      format_name: quarto
      format_version: '1.0'
      jupytext_version: 1.16.1
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
---

# Ansys Style actions

style actions verify code and documentation.

**Running code style checks**

```{python}
- name: "Run Ansys code style checks"
  uses: ansys/actions/code-style@v7.0
```

***Reference***: [Ansys code style action](https://actions.docs.ansys.com/version/stable/style-actions/index.html#code-style-action)

**Running documentation style checks**

```{python}
- name: "Running documentation style checks"
  uses: ansys/actions/doc-style@v7.0
  with:
    token: ${{ secrets.GITHUB_TOKEN }}
```

***Reference***: [Ansys doc style action](https://actions.docs.ansys.com/version/stable/style-actions/index.html#doc-style-action)

# Ansys Tests actions

Tests actions allow to run the test suite.

**Running tests with pytest**

```{python}
- name: "Run pytest"
  uses: ansys/actions/tests-pytest@v7.0
  with:
    pytest-markers: "-k 'mocked'"
    pytest-extra-args: "--cov=ansys.<library>
    --cov-report=term --cov-report=html:.cov/html"
```

***Reference***: [Ansys tests action](https://actions.docs.ansys.com/version/stable/tests-actions/index.html#tests-action)

# Documentation actions

Documentation actions allow to build and deploy documentation.

**Building library documentation**

```{python}
- name: "Run Ansys documentation building
    action"
  uses: ansys/actions/doc-build@v7.0
```

***Reference***: [Ansys doc build action](https://actions.docs.ansys.com/version/stable/doc-actions/index.html#doc-build-action)

**Deploying documentation to GitHub Pages**

- Deploying development documentation to GitHub Pages.

```{python}
- name: "Deploy the latest documentation"
  uses: ansys/actions/doc-deploy-dev@v7.0
  with:
    cname: "<library>.docs.pyansys.com"
    token: ${{ secrets.GITHUB_TOKEN }}
```

***Reference***: [Ansys doc deploy action](https://actions.docs.ansys.com/version/stable/doc-actions/index.html#doc-deploy-action)

- Deploying stable documentation to GitHub Pages.

```{python}
- name: "Deploy the stable documentation"
  uses: ansys/actions/doc-deploy-stable@v7.0
  with:
      cname: "<library>.docs.pyansys.com"
      token: ${{ secrets.GITHUB_TOKEN }}
```

***Reference***: [Ansys doc deploy action](https://actions.docs.ansys.com/version/stable/doc-actions/index.html#doc-deploy-action)

# License actions

Verifies if the licenses of the dependencies installed in the current environment are compliant with PyAnsys guidelines.

```{python}
- name: "Validate third party licenses"
  uses: ansys/actions/check-licenses@v7.0
  with:
    python-version: ${{ env.MAIN_PYTHON_VERSION }}
```

***Reference***: [Ansys license action](https://actions.docs.ansys.com/version/stable/license-actions/index.html#check-licenses-action)

# Build actions

Build actions allow to build artifacts for the library.


**Build library wheel**

```{python}
- name: "Build library source and wheel artifacts"
  uses: ansys/actions/build-library@v7.0
  with:
    library-name: "ansys-<product>-<library>"
```

***Reference***: [Ansys build action](https://actions.docs.ansys.com/version/stable/build-actions/index.html#build-library-action)

# Release actions

Release actions allow to create a release to github, public PyPI and private PyPI.

**Release PyPI private action**

```{python}
- name: "Release to the private PyPI repository"
  uses: ansys/actions/release-pypi-private@v7.0
  with:
    library-name: "ansys-<product>-<library>"
    twine-username: "__token__"
    twine-token: ${{ secrets.PYANSYS_PYPI_PRIVATE_PAT }}
```

***Reference***: [Ansys release action](https://actions.docs.ansys.com/version/stable/release-actions/index.html#release-pypi-private-action)

**Release PyPI public action**

```{python}
- name: "Release to the public PyPI repository"
  uses: ansys/actions/release-pypi-public@v7.0
  with:
    library-name: "ansys-<product>-<library>"
    twine-username: "__token__"
    twine-token: ${{ secrets.PYPI_TOKEN }}
```

***Reference***: [Ansys release action](https://actions.docs.ansys.com/version/stable/release-actions/index.html#release-pypi-public-action)

**Release GitHub action**

```{python}
- name: "Create a release on GitHub"
    uses: ansys/actions/release-github@v7.0
    with:
        library-name: "ansys-<product>-<library>"
        token: ${{ secrets.GITHUB_TOKEN }}
```

***Reference***: [Ansys release action](https://actions.docs.ansys.com/version/stable/release-actions/index.html#release-github-action)

# Housekeeping actions

Housekeeping actions allow to perform general repository operations such as package cleanup.

**untagged version cleanup action**

```{python}
- name: "Perform untagged versions cleanup"
  uses: ansys/actions/hk-package-clean-untagged@v7.0
  with:
    package-name: 'mypackage'
    token: ${{ secrets.GITHUB_TOKEN }}
```

***Reference***: [Ansys housekeeping action](https://actions.docs.ansys.com/version/stable/housekeeping-actions/index.html#package-clean-untagged-action)

**Package cleanup excluding certain versions**

```{python}

- name: "Perform versions cleanup"
  uses: ansys/actions/hk-package-clean-except@v7.0
  with:
    package-name: 'mypackage'
    token: ${{ secrets.GITHUB_TOKEN }}
    tags-kept: 'latest, latest-unstable'
```

***Reference***: [Ansys housekeeping action](https://actions.docs.ansys.com/version/stable/housekeeping-actions/index.html#package-clean-except-action)

# Vulnerability actions
Vulnerability actions allow to check for vulnerabilities in the dependencies.

```{python}
- name: "Check library vulnerabilities"
  uses: ansys/actions/check-vulnerabilities@v7.0
  with:
    python-version: ${{ env.MAIN_PYTHON_VERSION }}
    token: ${{ secrets.PYANSYS_CI_BOT_TOKEN }}
    python-package-name: 'ansys-<product>-<library>'
```
```{note}
Add ``dev-mode: true`` to the `with` section to
enable the development mode.
```

***Reference***: [Ansys vulnerability action](https://actions.docs.ansys.com/version/stable/vulnerability-actions/index.html#check-vulnerabilities-action)

## References

- [Ansys action documentation](https://actions.docs.ansys.com/version/stable/)
- [Ansys action migration guide](https://actions.docs.ansys.com/version/stable/migrations/index.html)